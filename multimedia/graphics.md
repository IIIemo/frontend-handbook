# Графика
Правильно выбранный формат позволит сохранить картинку в минимальном размере с приличным качеством.

Изучите форматы файлов, используемых в вебе; разберитесь, какие форматы для каких картинок лучше подходят; научитесь оптимизировать изображения.

## Предварительная подготовка
- Статья [Растровая и векторная графика](https://htmlacademy.ru/blog/111-rastr-vector) от HTML Academy.
- Статья [Форматы изображений](https://htmlacademy.ru/blog/113-image-formats) от HTML Academy.

## Форматы файлов
JPG, PNG и SVG — это основные форматы графических файлов на вебе.

Есть еще GIF, но его область использования ограничилась забавными анимациями. Относительно недавно появилось еще несколько форматов (APNG, WEBP), но они пока не поддерживаются всеми распространенными браузерами.

В таблице кратко описано, для каких картинок подходят те или иные форматы.

<table>
    <tr>
        <th>Формат</th>
        <th>Для каких изображений подходит</th>
    </tr>
    <tr>
        <td>SVG</td>
        <td><p>Векторные изображения, прежде всего иконки.</p></td>
    </tr>
    <tr>
        <td>JPG</td>
        <td><ul>
            <li>Фотографии, коллажи (несколько слепленных фотографий).</li>
              <li>Полноцветные изображения, похожее на фотографии или содержащие их части.</li>
                <li>Абстрактные, многоцветные, размытые фоны, не требующие высокого качества.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td>PNG</td>
        <td>
            <ul>
                <li>Растровая графика, созданная на компьютере с палитрой до 256 цветов: логотипы, небольшие арты, иконки и элементы дизайна (если нет возможности использовать SVG).</li>
                <li>Файлы с 8-битной прозрачностью (нет переходов от прозрачности к цвету, четко видно, где есть цвет, а где прозрачность).</li>
            </ul>
    </td>
    </tr>
    <tr>
        <td>PNG24</td>
        <td>
            <ul>
            <li>Сложные градиентные переходы.</li>
            <li>Полноцветные картинки с полупрозрачностью.</li>
            </ul>
            <p>Обеспечивает максимальное качество, но файлы могут быть тяжеловатыми.</p>
        </td>
    </tr>
    <tr>
        <td>GIF</td>
        <td><p>Анимация, если не получается ее сделать на CSS/JS/SVG.</p></td>
    </tr>
    <tr><th colspan="2">Новые форматы, не все браузеры поддерживают</th></tr>
    <tr>
        <td>APNG</td>
        <td><p>Анимированный PNG, <a href="http://littlesvr.ca/apng/gif_apng_webp.html">сравнение с GIF и WEBP</a>.</p></td>
    </tr>
    <tr>
        <td>WEBP</td>
        <td><p><a href="https://images.guide/#what-is-webp">Многообещающий формат</a> от Гугл.</p> </td>
    </tr>
</table>

### Подробнее про JPG
Формат `jpg` был придуман специально для хранения фотографий в цифровом виде. Отсюда следует, что в `jpg` нужно сохранять прежде всего фотки и фотко-подобные изображения.

`jpg` и `jpeg` — одно и то же. Просто два разных расширения для одного и того же формата файлов. Всегда используйте `jpg`.

`jpg` — формат с потерей качества. То есть при сохранении изображения в `jpg` оно подвергается воздействию ряда алгоритмов, оптимизирующих информацию о цветах и других параметрах. Если выставить 95% качества при сохранении, то едва ли можно будет заметить отличия от оригинала. При 30% будет заметно множество дефектов (их еще называют артефактами).

Если на изображении присутствуют мелкие контрастные детали, [не следует выставлять качество ниже 51](https://www.artlebedev.ru/technogrette/img/jpeg-3/). Можно взять за правило: **начинать оптимизацию фоток с 51% и смотреть, что получается** (внешний вид и размер файла). Во многих случаях это будет золотая середина.


## Именование файлов
Графические файлы именуются маленькими буквами без пробелов.

Расширение файла должно быть трехбуквенным, если такое имеется (`jpg` вместо `jpeg`).

Слова в названии разделяются `-`, префиксы и постфиксы — через `_`.

Примеры:

```bash
# Плохо
TopMenuBackground.png # использованы большие буквы в названии
girlPhoto.JPEG        # 4 буквы в расширении, большие буквы в имени файла и расширении

# Хорошо
bg_top-menu.png       # префикс дает больше информации о файле
teaser-girl.jpg       # понятно, что это завлекающая картинка с девушкой
```

### Префиксы и постфиксы
Префикс информирует о том, что хранится в файле, пишется в начале названия файла и отделяется `_`.

Примеры:

- `bnr_` — баннер (banner): `bnr_home-skin-category.png`;
- `arr_` — для стрелки (arrow): `arr_left.png`;
- `bg_` — для фона (background): `bg_top-menu.png`;
- `ico_` — для иконки: `ico_search.svg`;
- `slide_` — для изображения в слайдере: `slide_pdp-carousel_1.jpg`.

Постфикс используется для вспомогательных деталей, пишется в конце названия и также отделяется `_`. Постфикс можно использовать, например, для номера слайда:

```bash
slide_pdp-carousel_1.png
slide_pdp-carousel_2.png
```

## Макеты
Макеты от дизайнеров, как правило, приходят либо из [Фотошопа](http://www.adobe.com/ru/products/photoshop.html), либо из [Скетча](https://www.sketchapp.com/). Для работы с ними мы используем [Avocode](https://avocode.com/).

### Большие макеты из Фотошопа
Макеты из Фотошопа обычно имеют расширение [`.psd`](https://helpx.adobe.com/ru/photoshop/using/file-formats.html#photoshop_format_psd) или [`.psb`](https://helpx.adobe.com/ru/photoshop/using/file-formats.html#large_document_format_psb) (спецформат для больших файлов).

Если размер PSD/PSB-файла меньше 500Mb, то он нормально откроется Авокодом. В файлах больше 500Мб, скорее всего, используются артборды (хранится сразу несколько макетов) и нужно попросить дизайнера сохранить каждый артборд отдельно. Если вы работаете недавно и еще не в курсе, где искать дизайнера — расскажите своему менеджеру о вашей проблеме, он поможет разобраться.

## Оптимизация изображений
Для оптимизации изображений под МакОС подойдет [ImageOptim](https://imageoptim.com/mac), для других ОС тоже [есть варианты с графическим или CLI-интерфейсом](https://imageoptim.com/versions.html).

ImageOptim — графический интерфейс для набора утилит, которые оптимизируют, но не портят изображения:

> [ImageOptim](https://github.com/ImageOptim/ImageOptim#imageoptim) is a GUI for lossless image optimization tools: PNGOUT, AdvPNG, Pngcrush, OptiPNG, JpegOptim, MozJPEG, Gifsicle, SVGO, and svgcleaner.

Можно использовать инструменты для командной строки. Например, [Imagemin](https://github.com/imagemin/imagemin). В проекте также удобно иметь скрипт для оптимизации изображений, его можно запускать через [Гальп-плагин](https://github.com/sindresorhus/gulp-imagemin).

Это самые простые варианты. Более продвинутые техники оптимизации изображений описаны по ссылкам:

- Статья [Оптимизация изображений](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization?hl=ru) от Гугля.
- [Essential Image Optimization](https://images.guide/) — онлайн-книга Эдди Османи.
